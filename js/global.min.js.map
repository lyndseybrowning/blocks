{"version":3,"sources":["global.js"],"names":[],"mappings":";;AAAA,IAAI,IAAI,GAAG,CAAC,YAAW;;AAEnB,QAAI,KAAK,GAAG,IAAI;QACZ,IAAI,GAAG,QAAQ,CAAC,cAAc,CAAC,SAAS,CAAC;QACzC,OAAO,GAAG,QAAQ,CAAC,cAAc,CAAC,cAAc,CAAC;QACjD,SAAS,GAAG,QAAQ,CAAC,cAAc,CAAC,UAAU,CAAC;QAC/C,aAAa,GAAG,QAAQ,CAAC,cAAc,CAAC,oBAAoB,CAAC;QAC7D,SAAS,GAAG,QAAQ,CAAC,cAAc,CAAC,UAAU,CAAC;QAC/C,WAAW,GAAG,QAAQ,CAAC,cAAc,CAAC,gBAAgB,CAAC;QACvD,iBAAiB,GAAG,QAAQ,CAAC,cAAc,CAAC,kBAAkB,CAAC;QAC/D,SAAS,GAAG,UAAU,EAAE,GAAG,YAAY,GAAG,OAAO;QACjD,YAAY,GAAG,MAAM,CAAC,WAAW;QACjC,eAAe;QACf,kBAAkB;QAClB,iBAAiB;QACjB,QAAQ;QACR,QAAQ;QACR,gBAAgB;QAChB,YAAY;QACZ,KAAK,GAAG,CAAC;QACT,QAAQ,GAAG;AACP,aAAK,EAAQ,EAAE;AACf,gBAAQ,EAAK,EAAE;AACf,gBAAQ,EAAK,GAAG;AAChB,iBAAS,EAAI,EAAE;AACf,kBAAU,EAAG,AAAC,KAAK,GAAI,GAAG,GAAG,IAAI;KACpC,CAAC;;;;;;;;;;;;;AAaL,aAAS,QAAQ,CAAC,GAAG,EAAE,UAAU,EAAE,IAAI,EAAE,WAAW,EAAE,QAAQ,EAAE;;;AAG7D,YAAG,CAAC,MAAM,CAAC,CAAC,EAAE;AACZ,kBAAM,IAAI,KAAK,CAAC,+BAA+B,CAAC,CAAC;SAClD;;AAED,YAAG,OAAO,GAAG,KAAK,WAAW,IAAI,GAAG,KAAK,EAAE,EAAE;AACzC,kBAAM,IAAI,KAAK,CAAC,uCAAuC,CAAC,CAAC;SAC5D;;;AAGD,kBAAU,GAAG,UAAU,CAAC,WAAW,EAAE,IAAI,MAAM,CAAC;;AAEhD,YAAI,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,WAAW,CAAC,CAAC;;AAEjD,YAAG,UAAU,KAAK,MAAM,IAAI,MAAM,KAAK,IAAI,EAAE;AAC3C,kBAAM,IAAI,KAAK,CAAC,qFAAqF,CAAC,CAAC;SACxG;;AAED,YAAG,MAAM,KAAK,IAAI,EAAE;AAClB,gBAAI,WAAW,GAAG,UAAU,CAAC,KAAK,EAAE;AAClC,yBAAS,EAAE,cAAc;AACzB,mBAAG,EAAE,uBAAuB;aAC7B,CAAC,CAAC;;AAEH,kBAAM,CAAC,SAAS,GAAG,EAAE,CAAC;AACtB,kBAAM,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC;SACjC;;AAED,SAAC,CAAC,IAAI,CAAC;AACL,iBAAK,EAAE,KAAK;AACZ,kBAAM,EAAE,AAAC,UAAU,KAAK,MAAM,GAAI,KAAK,GAAG,MAAM;AAChD,eAAG,EAAE,GAAG;AACR,gBAAI,EAAG,IAAI;AACX,mBAAO,EAAE,iBAAS,IAAI,EAAE;;AAEtB,oBAAG,UAAU,KAAK,MAAM,EAAE;AACxB,0BAAM,CAAC,SAAS,GAAG,IAAI,CAAC;iBACzB;;;;AAID,oBAAG,UAAU,KAAK,MAAM,EAAE;AACvB,wBAAI,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;AACxB,2BAAO,IAAI,CAAC;iBACd;aACF;AACD,oBAAQ,EAAE,kBAAS,IAAI,EAAE;;AAEvB,oBAAG,OAAO,QAAQ,KAAK,UAAU,EAAE;AACjC,4BAAQ,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;iBAC7B,MAAM,IAAG,MAAM,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,gBAAgB,EAAE;AACvE,4BAAQ,CAAC,OAAO,CAAC,UAAS,IAAI,EAAE;AAC9B,4BAAI,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;qBACzB,CAAC,CAAC;iBACJ;aACF;SACF,CAAC,CAAC;KAEN;;AAED,aAAS,UAAU,GAAG;AACpB,eAAQ,iEAAgE,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC;UAAE;KACrG;;;;;;;;AAQD,aAAS,UAAU,CAAC,EAAE,EAAE,GAAG,EAAE;;AAE3B,YAAG,EAAE,KAAK,EAAE,EAAE;AACV,kBAAM,IAAI,KAAK,CAAC,6CAA6C,CAAC,CAAC;SAClE;;AAED,YAAI,OAAO,GAAG,QAAQ,CAAC,aAAa,CAAC,EAAE,CAAC;YACpC,WAAW,GAAG,KAAK;YACnB,SAAS,CAAC;;AAEd,aAAI,IAAI,IAAI,IAAI,GAAG,EAAE;AACnB,uBAAW,GAAG,AAAC,IAAI,CAAC,CAAC,CAAC,KAAK,GAAG,GAAI,IAAI,GAAG,KAAK,CAAC;;AAE/C,gBAAG,WAAW,EAAE;AACd,yBAAS,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;AAC9B,uBAAO,CAAC,KAAK,CAAC,SAAS,CAAC,GAAG,GAAG,CAAC,IAAI,CAAC,CAAC;aACtC,MAAM;AACL,uBAAO,CAAC,IAAI,CAAC,GAAG,GAAG,CAAC,IAAI,CAAC,CAAC;aAC3B;SACF;;AAED,eAAO,OAAO,CAAC;KAChB;;;;;;AAMD,aAAS,QAAQ,CAAC,KAAK,EAAE;;AAErB,YAAG,OAAO,KAAK,KAAK,QAAQ,EAAE;AAC1B,kBAAM,IAAI,KAAK,CAAC,yEAAyE,CAAC,CAAC;SAC9F;;AAED,YAAG,KAAK,GAAG,QAAQ,CAAC,QAAQ,EAAE;AAC1B,kBAAM,IAAI,KAAK,CAAC,mEAAmE,GAAG,QAAQ,CAAC,QAAQ,GAAG,UAAU,CAAC,CAAC;SACzH;;AAED,YAAG,KAAK,IAAI,QAAQ,CAAC,QAAQ,EAAE;AAC3B,oBAAQ,CAAC,KAAK,GAAG,KAAK,CAAC;AACvB,wBAAY,GAAG,KAAK,CAAC;SACxB;;AAED,eAAO,KAAK,CAAC;KAChB;;;;;;AAMD,aAAS,aAAa,GAAG;AACvB,YAAI,KAAK,GAAG,QAAQ,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC;AAChD,aAAK,CAAC,SAAS,GAAG,QAAQ,CAAC,KAAK,CAAC;;AAEjC,eAAO,KAAK,CAAC;KACd;;;;;;AAMD,aAAS,eAAe,GAAG;AACzB,YAAI,SAAS,GAAG,UAAU,CAAC,KAAK,EAAE;AAChC,cAAE,EAAE,cAAc;AAClB,qBAAS,EAAG,MAAM;SACnB,CAAC,CAAC;;AAEH,eAAO,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC;;AAE/B,eAAO,SAAS,CAAC;KAClB;;AAED,aAAS,aAAa,CAAC,QAAQ,EAAE;AAC7B,uBAAe,GAAG,OAAO,CAAC,qBAAqB,EAAE,CAAC;AAClD,0BAAkB,GAAG,YAAY,GAAG,eAAe,CAAC,MAAM,CAAC;AAC3D,qBAAa,CAAC,SAAS,GAAG,EAAE,CAAC;AAC7B,qBAAa,CAAC,KAAK,CAAC,MAAM,GAAG,kBAAkB,GAAG,IAAI,CAAC;AACvD,iBAAS,CAAC,SAAS,GAAG,CAAC,CAAC;AACxB,aAAK,GAAG,CAAC,CAAC;;AAEV,eAAO,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;;AAE1B,YAAI,EAAE,GAAG,eAAe,EAAE;YACvB,OAAO,GAAG,CAAC;YACV,aAAa,GAAG,SAAhB,aAAa,GAAc;AAC1B,gBAAG,OAAO,KAAK,CAAC,EAAE;AACX,6BAAa,CAAC,SAAS,CAAC,CAAC;;;aAG5B;AACJ,cAAE,CAAC,SAAS,GAAG,AAAC,OAAO,KAAK,CAAC,GAAI,KAAK,GAAG,OAAO,EAAE,CAAC;SACnD;YACD,SAAS,GAAG,WAAW,CAAC,aAAa,CAAC,IAAI,CAAC,OAAO,EAAE,QAAQ,CAAC,EAAE,QAAQ,CAAC,UAAU,CAAC,CAAC;KAC3F;;AAED,aAAS,eAAe,GAAG;AACvB,YAAI,SAAS,GAAG,QAAQ,CAAC,cAAc,CAAC,cAAc,CAAC,CAAC;AACxD,iBAAS,CAAC,SAAS,IAAI,WAAW,CAAC;;AAEnC,kBAAU,CAAC,YAAW;AACpB,qBAAS,CAAC,UAAU,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC;SAC7C,EAAE,IAAI,CAAC,CAAC;KACZ;;AAED,aAAS,WAAW,GAAG;AACnB,YAAI,SAAS,GAAG,QAAQ,CAAC,SAAS;YAC9B,OAAO,GAAG,aAAa,CAAC,WAAW,GAAG,SAAS;YAC/C,MAAM,GAAG,aAAa,CAAC,YAAY,GAAG,SAAS;YAChD,WAAW,GAAG,SAAd,WAAW,CAAY,GAAG,EAAE,GAAG,EAAE;AAC7B,mBAAO,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,IAAK,GAAG,GAAC,GAAG,GAAG,CAAC,CAAA,AAAE,GAAG,GAAG,CAAC,CAAC;SAC5D;YACA,KAAK,GAAG,UAAU,CAAC,KAAK,EAAE;AACxB,uBAAW,EAAG,OAAO;AACrB,oBAAQ,EAAG,SAAS,GAAG,IAAI;AAC3B,qBAAS,EAAG,SAAS,GAAG,IAAI;AAC5B,uBAAW,EAAG,UAAU;AACxB,mBAAO,EAAG,WAAW,CAAC,CAAC,EAAE,OAAO,CAAC,GAAG,IAAI;AACxC,kBAAM,EAAG,WAAW,CAAC,CAAC,EAAE,MAAM,CAAC,GAAG,IAAI;SACvC,CAAC,CAAC;;AAEP,eAAO,KAAK,CAAC;KAChB;;AAED,aAAS,KAAK,GAAG;AACb,YAAI,KAAK,GAAG,WAAW,EAAE;YACrB,QAAQ,GAAG,SAAX,QAAQ,GAAc;AAClB,qBAAS,CAAC,SAAS,GAAG,EAAE,KAAK,CAAC;AAC9B,gBAAI,CAAC,UAAU,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;AAClC,iBAAK,EAAE,CAAC;SACX,CAAC;;AAEN,qBAAa,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;AACjC,aAAK,CAAC,gBAAgB,CAAC,SAAS,EAAE,QAAQ,CAAC,CAAC;KAC/C;;;;;AAKD,aAAS,SAAS,CAAC,QAAQ,EAAE;AAC3B,YAAI,IAAI,GAAG,QAAQ,CAAC,oBAAoB,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;YACjD,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;AAC1C,cAAM,CAAC,IAAI,GAAG,iBAAiB,CAAC;AAChC,cAAM,CAAC,GAAG,GAAG,kEAAkE,CAAC;;AAEjF,cAAM,CAAC,kBAAkB,GAAG,QAAQ,CAAC;AACrC,cAAM,CAAC,MAAM,GAAG,QAAQ,CAAC;;AAEzB,YAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;KAC3B;;;;;;;AAOD,aAAS,eAAe,GAAG;;AAEzB,YAAI,SAAS,GAAG,QAAQ,CAAC,cAAc,CAAC,WAAW,CAAC;YAChD,MAAM,GAAG,QAAQ,CAAC,cAAc,CAAC,gBAAgB,CAAC;YAClD,UAAU,GAAG,QAAQ,CAAC,cAAc,CAAC,YAAY,CAAC;YAClD,WAAW,GAAG,SAAd,WAAW,CAAY,CAAC,EAAE;AACpB,gBAAI,QAAQ,GAAG,QAAQ,CAAC,aAAa,CAAC,WAAW,CAAC;gBAClD,UAAU,GAAG,EAAE,CAAC;;AAEpB,sBAAU,CAAC,SAAS,GAAG,AAAC,UAAU,CAAC,KAAK,KAAK,EAAE,GAAI,OAAO,GAAG,EAAE,CAAC;;AAEhE,gBAAG,UAAU,CAAC,KAAK,KAAK,EAAE,EAAE;AAC1B,0BAAU,CAAC,UAAU,GAAG,UAAU,CAAC,KAAK,CAAC;AACzC,0BAAU,CAAC,KAAK,GAAG,KAAK,CAAC;AACzB,0BAAU,CAAC,WAAW,GAAG,MAAM,CAAC,KAAK,CAAC;AACtC,0BAAU,CAAC,YAAY,GAAG,MAAM,CAAC,MAAM,CAAC;AACxC,0BAAU,CAAC,QAAQ,GAAG,QAAQ,CAAC,KAAK,CAAC;;;AAGtC,2BAAW,CAAC,YAAY,EAAE,UAAU,CAAC,KAAK,CAAC,CAAC;;;AAG3C,wBAAQ,CAAC,wBAAwB,EAAE,MAAM,EAAE,UAAU,EAAE,YAAY,EAAE,cAAc,CAAC,CAAC;aACtF;AACD,aAAC,CAAC,cAAc,EAAE,CAAC;SACpB,CAAC;;AAEN,wBAAgB,GAAG,UAAU,CAAC,YAAY,CAAC,CAAC;AAC5C,kBAAU,CAAC,KAAK,GAAG,AAAC,gBAAgB,KAAK,EAAE,GAAI,gBAAgB,GAAG,EAAE,CAAC;;AAErE,iBAAS,CAAC,gBAAgB,CAAC,SAAS,EAAE,WAAW,CAAC,CAAC;AACnD,cAAM,CAAC,gBAAgB,CAAC,QAAQ,EAAE,WAAW,CAAC,CAAC;AAC/C,kBAAU,CAAC,QAAQ,EAAE,qCAAqC,CAAC,CAAC;KAC7D;;AAED,aAAS,cAAc,CAAC,IAAI,EAAE;AAC5B,YAAI,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,OAAO;YAClC,eAAe,CAAC;;AAEpB,YAAG,OAAO,EAAE;AACV,oBAAQ,CAAC,SAAS,GAAG,oDAAoD,CAAC;;AAE1E,2BAAe,GAAG,UAAU,CAAC,GAAG,EAAE;AAChC,sBAAM,EAAG,mBAAmB;AAC5B,2BAAW,EAAG,kBAAkB;aACjC,CAAC,CAAC;;AAEH,oBAAQ,CAAC,WAAW,CAAC,eAAe,CAAC,CAAC;AACtC,oBAAQ,CAAC,SAAS,IAAI,SAAS,CAAC;AAChC,sBAAU,CAAC,QAAQ,CAAC,CAAC;SAEtB,MAAM;AACL,oBAAQ,CAAC,SAAS,IAAI,wFAAwF,CAAC;SAChH;KACF;;AAED,aAAS,UAAU,CAAC,MAAM,EAAE,OAAO,EAAE;AAClC,YAAI,UAAU,GAAG,kBAAkB,CAAC,OAAO,CAAC,CAAC;;AAE7C,cAAM,CAAC,WAAW,CAAC,UAAU,CAAC,CAAC;AAC/B,2BAAmB,CAAC,UAAU,CAAC,CAAC;KAClC;;AAED,aAAS,kBAAkB,CAAC,OAAO,EAAE;AACnC,YAAI,GAAG,GAAG,UAAU,CAAC,QAAQ,EAAE;AAC7B,gBAAI,EAAE,aAAa;AACnB,uBAAW,EAAE,AAAC,OAAO,OAAO,KAAK,WAAW,GAAI,OAAO,GAAG,YAAY;SACvE,CAAC,CAAC;;AAEH,eAAO,GAAG,CAAC;KACZ;;AAED,aAAS,mBAAmB,CAAC,EAAE,EAAE;AAC/B,UAAE,CAAC,gBAAgB,CAAC,SAAS,EAAE,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,YAAY,CAAC,CAAC,CAAC;KAC/D;;AAED,aAAS,OAAO,GAAG;AACf,gBAAQ,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;AACzC,gBAAQ,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;;AAEzC,gBAAQ,CAAC,EAAE,GAAG,WAAW,CAAC;AAC3B,gBAAQ,CAAC,SAAS,GAAG,+BAA+B,GAAG,KAAK,GAAG,UAAU,CAAC;AACzE,qBAAa,CAAC,SAAS,GAAG,EAAE,CAAC;AAC7B,qBAAa,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;;AAEpC,gBAAQ,CAAC,EAAE,GAAG,WAAW,CAAC;AAC1B,gBAAQ,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;;AAE/B,iBAAS,CAAC,YAAW;AACnB,oBAAQ,CAAC,8BAA8B,EAAE,MAAM,EAAE,EAAE,EAAE,YAAY,EAAE,eAAe,CAAC,CAAC;SACrF,CAAC,CAAC;KACN;;AAED,aAAS,SAAS,GAAG;AACnB,YAAI,aAAa,GAAG,SAAhB,aAAa,GAAc;AAC1B,qBAAS,CAAC,SAAS,GAAG,QAAQ,CAAC,KAAK,EAAE,CAAC;;AAEtC,gBAAG,QAAQ,CAAC,KAAK,GAAG,CAAC,EAAE;AACrB,uBAAO,EAAE,CAAC;AACV,uBAAO,aAAa,CAAC,QAAQ,CAAC,CAAC;aAChC;SACL;YACD,QAAQ,GAAG,WAAW,CAAC,aAAa,EAAE,QAAQ,CAAC,UAAU,CAAC,CAAC;;AAE1D,aAAK,EAAE,CAAC;KACX;;AAED,aAAS,IAAI,CAAC,KAAK,EAAE;AAClB,gBAAQ,CAAC,KAAK,CAAC,CAAC;AAChB,qBAAa,EAAE,CAAC;AAChB,qBAAa,CAAC,SAAS,CAAC,CAAC;KAC3B;;AAED,QAAG,IAAI,EAAE;AACL,YAAI,CAAC,EAAE,CAAC,CAAC;KACZ;;;;;AAKA,aAAS,WAAW,CAAC,KAAK,EAAE,MAAM,EAAE,MAAM,EAAE;AACzC,YAAI,CAAC,GAAG,IAAI,IAAI,EAAE;YAChB,OAAO,CAAC;;AAEV,cAAM,GAAG,MAAM,IAAI,CAAC,CAAC;AACrB,SAAC,CAAC,OAAO,CAAC,CAAC,CAAC,OAAO,EAAE,GAAI,MAAM,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI,AAAC,CAAC,CAAC;AACxD,eAAO,GAAG,UAAU,GAAG,CAAC,CAAC,WAAW,EAAE,CAAC;AACvC,gBAAQ,CAAC,MAAM,GAAG,KAAK,GAAG,GAAG,GAAG,MAAM,GAAG,IAAI,GAAG,OAAO,GAAG,UAAU,CAAC;KACvE;;AAED,aAAS,UAAU,CAAC,KAAK,EAAE;AACzB,YAAI,IAAI,GAAG,KAAK,GAAG,GAAG;YAClB,OAAO,GAAG,QAAQ,CAAC,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC;YACpC,GAAG,GAAG,OAAO,CAAC,MAAM;YACpB,CAAC,GAAG,CAAC;YACL,CAAC,CAAC;;AAEN,aAAK,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;AACpB,aAAC,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC;AACtB,gBAAI,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE;AACzB,uBAAO,CAAC,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC;aAC3C;SACF;AACD,eAAO,EAAE,CAAC;KACV;;;;;AAKH,aAAS,iBAAiB,CAAC,aAAa,EAAE;AACxC,YAAI,sBAAsB,GAAG,UAAU,CAAC,mBAAmB,CAAC,CAAC;;AAE7D,YAAG,aAAa,EAAE;AAChB,uBAAW,CAAC,mBAAmB,EAAE,iBAAiB,CAAC,KAAK,CAAC,CAAC;SAC3D,MAAM;AACL,gBAAG,sBAAsB,KAAK,EAAE,EAAE;AAChC,iCAAiB,CAAC,KAAK,GAAG,sBAAsB,CAAC;aAClD;SACF;AACD,gBAAQ,CAAC,2BAA2B,EAAE,MAAM,EAAE,EAAE,UAAU,EAAE,iBAAiB,CAAC,KAAK,EAAE,EAAE,iBAAiB,CAAC,CAAC;KAC3G;;AAED,QAAG,WAAW,EAAE;AACd,yBAAiB,EAAE,CAAC;AACpB,yBAAiB,CAAC,gBAAgB,CAAC,QAAQ,EAAE,iBAAiB,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC,CAAC;KAClF;CAEJ,CAAA,EAAG,CAAC","file":"global.min.js","sourcesContent":["var game = (function() {\r\n\r\n    var debug = true,\r\n        game = document.getElementById('js-game'),\r\n        gameTop = document.getElementById('js-game__top'),\r\n        gameTimer = document.getElementById('js-timer'),\r\n        gameContainer = document.getElementById('js-game__container'),\r\n        gameScore = document.getElementById('js-score'),\r\n        gameLeaders = document.getElementById('js-leaderboard'),\r\n        gameLeaderFilters = document.getElementById('js-filter-device'),\r\n        eventName = isHandheld() ? 'touchstart' : 'click',\r\n        windowHeight = window.innerHeight,\r\n        containerOffset,\r\n        containerMaxHeight,\r\n        leaderboardFilter,\r\n        gameOver,\r\n        addScore,\r\n        playerNameCookie,\r\n        defaultTimer,\r\n        score = 0,\r\n        settings = {         /***  global game settings ***/\r\n            timer      : 30,  // default game length in seconds\r\n            minTimer   : 10,  // minimum game length in seconds\r\n            maxTimer   : 180, // maximum game length in seconds\r\n            blockSize  : 50,  // size of game blocks in pixels\r\n            timerSpeed : (debug) ? 500 : 1000 // 1/2 second for debugging\r\n        };\r\n\r\n    /**\r\n     * Global ajax request function that performs an ajax request\r\n     * and runs a callback on completion, where required.\r\n     * @param  string   url             URL to request\r\n     * @param  string   returnType        Return type expects one of: json, html, null\r\n     * @param  json     data            JSON data to be passed to AJAX, where required\r\n     * @param  string   htmlElement     HTML element to append result to, if return type is html\r\n     * @param  function callback        Function(s) to run on successful completion of AJAX request\r\n                                        Multiple functions can be passed in array format\r\n     * @return {}                       null\r\n     */\r\n     function callAjax(url, returnType, data, htmlElement, callback) {\r\n\r\n        // ensure that jQuery is linked to because we are using jQuery $.ajax() methods\r\n        if(!window.$) {\r\n          throw new Error('jQuery not found! Please add.');\r\n        }\r\n\r\n        if(typeof url === 'undefined' || url === '') {\r\n            throw new Error('No URL passed to callAjax() function.');\r\n        }\r\n\r\n        // set HTML as default returnType if none is specified\r\n        returnType = returnType.toLowerCase() || 'html';\r\n\r\n        var htmlEl = document.querySelector(htmlElement);\r\n\r\n        if(returnType === 'html' && htmlEl === null) {\r\n          throw new Error('callAjax() returnType specified as HTML but no DOM element provided for return data');\r\n        }\r\n\r\n        if(htmlEl !== null) {\r\n          var ajaxLoading = generateEl('img', {\r\n            className: 'ajax-loading',\r\n            src: '/img/ajax-loading.gif'\r\n          });\r\n\r\n          htmlEl.innerHTML = '';\r\n          htmlEl.appendChild(ajaxLoading);\r\n        }\r\n\r\n        $.ajax({\r\n          cache: false,\r\n          method: (returnType === 'html') ? 'GET' : 'POST',\r\n          url: url,\r\n          data : data,\r\n          success: function(data) {\r\n\r\n            if(returnType === \"html\") {\r\n              htmlEl.innerHTML = data;\r\n            }\r\n\r\n            //json data is returned from function\r\n            //so it can be used afterwards\r\n            if(returnType === \"json\") {\r\n               data = JSON.parse(data);\r\n               return data;\r\n            }\r\n          },\r\n          complete: function(data) {\r\n\r\n            if(typeof callback === 'function') {\r\n              callback(data.responseText);\r\n            } else if(Object.prototype.toString.call(callback) === '[object Array]') {\r\n              callback.forEach(function(func) {\r\n                func(data.responseText);\r\n              });\r\n            }\r\n          }\r\n        });\r\n\r\n    }\r\n\r\n    function isHandheld() {\r\n      return (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent));\r\n    }\r\n\r\n    /**\r\n    * This function generates a new DOM element\r\n    * @param  string element type\r\n    * @param  object object literal containing the new elements attributes\r\n    * @return new DOM element\r\n    */\r\n    function generateEl(el, obj) {\r\n\r\n      if(el === '') {\r\n          throw new Error('No element passed to generateEl() function.');\r\n      }\r\n\r\n      var element = document.createElement(el),\r\n          isStyleAttr = false,\r\n          styleAttr;\r\n\r\n      for(var attr in obj) {\r\n        isStyleAttr = (attr[0] === '_') ? true : false;\r\n\r\n        if(isStyleAttr) {\r\n          styleAttr = attr.substring(1);\r\n          element.style[styleAttr] = obj[attr];\r\n        } else {\r\n          element[attr] = obj[attr];\r\n        }\r\n      }\r\n\r\n      return element;\r\n    }\r\n\r\n    /**\r\n     * Sets the global settings.timer variable which is the game's timer in seconds\r\n     * @param number timer game timer in seconds\r\n     */\r\n    function setTimer(timer) {\r\n\r\n        if(typeof timer !== \"number\") {\r\n            throw new Error(\"game.init() expects Number as first parameter. Non-numeric value given.\");\r\n        }\r\n\r\n        if(timer > settings.maxTimer) {\r\n            throw new Error(\"maxTimer value exceeded. game.init() expects a timer value up to \" + settings.maxTimer + \" seconds\");\r\n        }\r\n\r\n        if(timer >= settings.minTimer) {\r\n            settings.timer = timer;\r\n            defaultTimer = timer;\r\n        }\r\n\r\n        return timer;\r\n    }\r\n\r\n    /**\r\n     * Creates the game's timer element and appends the timer in seconds to it\r\n     * @return timer element\r\n     */\r\n    function generateTimer() {\r\n      var timer = document.getElementById('js-timer');\r\n      timer.innerHTML = settings.timer;\r\n\r\n      return timer;\r\n    }\r\n\r\n    /**\r\n     * Creates the game's countdown and appends it to the the main game canvas\r\n     * @return countdown element\r\n     */\r\n    function createCountdown() {\r\n      var countdown = generateEl('div', {\r\n        id: 'js-countdown',\r\n        className : 'fade'\r\n      });\r\n\r\n      gameTop.appendChild(countdown);\r\n\r\n      return countdown;\r\n    }\r\n\r\n    function getReadyAndGo(callback) {\r\n        containerOffset = gameTop.getBoundingClientRect();\r\n        containerMaxHeight = windowHeight - containerOffset.bottom;\r\n        gameContainer.innerHTML = '';\r\n        gameContainer.style.height = containerMaxHeight + 'px';\r\n        gameScore.innerHTML = 0;\r\n        score = 0;\r\n\r\n        console.log(windowHeight);\r\n\r\n        var el = createCountdown(),\r\n        \t  counter = 3,\r\n            handleCounter = function() {\r\n            \tif(counter === 0) {\r\n                    clearInterval(countdown);\r\n                    //removeCountdown();\r\n                    //callback();\r\n                }\r\n            \tel.innerHTML = (counter === 0) ? \"GO!\" : counter--;\r\n            },\r\n            countdown = setInterval(handleCounter.bind(counter, callback), settings.timerSpeed);\r\n    }\r\n\r\n    function removeCountdown() {\r\n        var countdown = document.getElementById('js-countdown');\r\n        countdown.className += ' fade-out';\r\n\r\n        setTimeout(function() {\r\n          countdown.parentNode.removeChild(countdown);\r\n        }, 1000);\r\n    }\r\n\r\n    function createBlock() {\r\n        var blockSize = settings.blockSize,\r\n            maxLeft = gameContainer.offsetWidth - blockSize,\r\n            maxTop = gameContainer.offsetHeight - blockSize,\r\n          \tgeneratePos = function(min, max) {\r\n              \treturn Math.floor(Math.random() * ( max-min + 1 ) + min);\r\n          \t},\r\n            block = generateEl('div', {\r\n              'className' : 'block',\r\n              '_width' : blockSize + 'px',\r\n              '_height' : blockSize + 'px',\r\n              '_position' : 'absolute',\r\n              '_left' : generatePos(0, maxLeft) + 'px',\r\n              '_top' : generatePos(0, maxTop) + 'px'\r\n            });\r\n\r\n        return block;\r\n    }\r\n\r\n    function build() {\r\n        var block = createBlock(),\r\n            hitBlock = function() {\r\n                gameScore.innerHTML = ++score;\r\n                this.parentNode.removeChild(this);\r\n                build();\r\n            };\r\n\r\n        gameContainer.appendChild(block);\r\n        block.addEventListener(eventName, hitBlock);\r\n    }\r\n\r\n    /**\r\n     *  Load jQuery in dynamically\r\n     */\r\n    function getjQuery(callback) {\r\n      var head = document.getElementsByTagName('head')[0],\r\n        script = document.createElement('script');\r\n        script.type = 'text/javascript';\r\n        script.src = 'https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js';\r\n\r\n       script.onreadystatechange = callback;\r\n       script.onload = callback;\r\n\r\n       head.appendChild(script);\r\n    }\r\n\r\n    /**\r\n    * This is a callback of endGame() that is called\r\n    * when the submit score form has finished loading\r\n    * from here, we handle the event that submits the score via AJAX\r\n    */\r\n    function submitScoreForm() {\r\n\r\n      var btnSubmit = document.getElementById('btnSubmit'),\r\n          formEl = document.getElementById('frmScoreSubmit'),\r\n          playerName = document.getElementById('playerName'),\r\n          submitScore = function(e) {\r\n                var honeypot = document.querySelector('.honeypot'),\r\n                submitData = {};\r\n\r\n            playerName.className = (playerName.value === '') ? 'empty' : '';\r\n\r\n            if(playerName.value !== '') {\r\n              submitData.playerName = playerName.value;\r\n              submitData.score = score;\r\n              submitData.screenWidth = screen.width;\r\n              submitData.screenHeight = screen.height;\r\n              submitData.honeypot = honeypot.value;\r\n\r\n              // store player name in cookie for later use\r\n             writeCookie('playerName', playerName.value);\r\n\r\n              // submit score\r\n              callAjax('/ajax/submit-score.php', 'null', submitData, '#add-score', scoreSubmitted);\r\n            }\r\n            e.preventDefault();\r\n          };\r\n\r\n      playerNameCookie = readCookie('playerName');\r\n      playerName.value = (playerNameCookie !== '') ? playerNameCookie : '';\r\n\r\n      btnSubmit.addEventListener(eventName, submitScore);\r\n      formEl.addEventListener('submit', submitScore);\r\n      newGameDom(addScore, \"Don't submit score, play again now!\");\r\n    }\r\n\r\n    function scoreSubmitted(data) {\r\n      var success = JSON.parse(data).success,\r\n          leaderboardLink;\r\n\r\n      if(success) {\r\n        addScore.innerHTML = '<p> Thank you! Your score has been submitted! </p>';\r\n\r\n        leaderboardLink = generateEl('a', {\r\n          'href' : '/leaderboard.html',\r\n          'innerHTML' : 'View Leaderboard'\r\n        });\r\n\r\n        addScore.appendChild(leaderboardLink);\r\n        addScore.innerHTML += ' or... ';\r\n        newGameDom(addScore);\r\n\r\n      } else {\r\n        addScore.innerHTML += '<p> Sorry! Looks like there was an error submitting your score. Please try again! </p>';\r\n      }\r\n    }\r\n\r\n    function newGameDom(target, btnText) {\r\n       var newGameBtn = generateNewGameBtn(btnText);\r\n\r\n       target.appendChild(newGameBtn);\r\n       newGameEventHandler(newGameBtn);\r\n    }\r\n\r\n    function generateNewGameBtn(btnText) {\r\n      var btn = generateEl('button', {\r\n        'id': 'js-new-game',\r\n        'innerHTML': (typeof btnText !== 'undefined') ? btnText : 'Play Again'\r\n      });\r\n\r\n      return btn;\r\n    }\r\n\r\n    function newGameEventHandler(el) {\r\n      el.addEventListener(eventName, init.bind(this, defaultTimer));\r\n    }\r\n\r\n    function endGame() {\r\n        gameOver = document.createElement('div');\r\n        addScore = document.createElement('div');\r\n\r\n        gameOver.id = 'game-over';\r\n      \tgameOver.innerHTML = 'Game Over! <br /> You scored ' + score + ' Points!';\r\n        gameContainer.innerHTML = \"\";\r\n        gameContainer.appendChild(gameOver);\r\n\r\n        addScore.id = 'add-score';\r\n        gameOver.appendChild(addScore);\r\n\r\n        getjQuery(function() {\r\n          callAjax(\"/ajax/submit-score-form.html\", \"html\", \"\", \"#add-score\", submitScoreForm);\r\n        });\r\n    }\r\n\r\n    function startGame() {\r\n      var handleCounter = function() {\r\n          \tgameTimer.innerHTML = settings.timer--;\r\n\r\n            if(settings.timer < 0) {\r\n              endGame();\r\n              return clearInterval(initGame);\r\n            }\r\n      \t},\r\n      \tinitGame = setInterval(handleCounter, settings.timerSpeed);\r\n\r\n        build();\r\n    }\r\n\r\n    function init(timer) {\r\n       setTimer(timer);\r\n       generateTimer();\r\n       getReadyAndGo(startGame);\r\n    }\r\n\r\n    if(game) {\r\n        init(10);\r\n    }\r\n\r\n    /**\r\n     * General functions\r\n     */\r\n     function writeCookie(cname, cvalue, exdays) {\r\n        var d = new Date(),\r\n          expires;\r\n\r\n        exdays = exdays || 1;\r\n        d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));\r\n        expires = \"expires=\" + d.toGMTString();\r\n        document.cookie = cname + \"=\" + cvalue + \"; \" + expires + \"; path=/\";\r\n     }\r\n\r\n     function readCookie(cname) {\r\n       var name = cname + \"=\",\r\n           cookies = document.cookie.split(';'),\r\n           len = cookies.length,\r\n           i = 0,\r\n           c;\r\n\r\n       for (i; i < len; i++) {\r\n         c = cookies[i].trim();\r\n         if (c.indexOf(name) === 0) {\r\n           return c.substring(name.length, c.length);\r\n         }\r\n       }\r\n       return '';\r\n      }\r\n\r\n    /**\r\n     * Leaderboard functions\r\n     */\r\n    function renderLeaderboard(isChangeEvent) {\r\n      var gameLeaderFilterCookie = readCookie('gameLeaderFilters');\r\n\r\n      if(isChangeEvent) {\r\n        writeCookie('gameLeaderFilters', gameLeaderFilters.value);\r\n      } else {\r\n        if(gameLeaderFilterCookie !== '') {\r\n          gameLeaderFilters.value = gameLeaderFilterCookie;\r\n        }\r\n      }\r\n      callAjax('/ajax/get-leaderboard.php', 'html', { deviceType: gameLeaderFilters.value }, '#js-leaderboard');\r\n    }\r\n\r\n    if(gameLeaders) {\r\n      renderLeaderboard();\r\n      gameLeaderFilters.addEventListener('change', renderLeaderboard.bind(this, true));\r\n    }\r\n\r\n})();\r\n"]}